import { validateInput } from "./validation.js";

/** 
 * –§—É–Ω–∫—Ü–∏—è, –≤—ã–±–∏—Ä–∞—é—â–∞—è –≤—Å–µ —á–µ–∫–±–æ–∫—Å—ã "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" –∫—Ä–æ–º–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ checkboxElement –∏ 
 * –æ—Ç–∫–ª—é—á–∞—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è.
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —É —á–µ–∫–±–æ–∫—Å–∞ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" —Å–æ—Å—Ç–æ—è–Ω–∏–µ
 * –º–µ–Ω—è–µ—Ç—Å—è —Å "–Ω–µ –≤—ã–±—Ä–∞–Ω" –Ω–∞ "–≤—ã–±—Ä–∞–Ω", –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ addOnChangeEventListenerToIdCheckbox().
 * @param {JQuery<HTMLElement>} idCheckboxElement - —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" 
 * @deprecated —Å –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π –æ—Ç–¥–∞–ª–∏ –Ω–∞ –±–µ–∫–µ–Ω–¥
 */
const _makeAnotherIdCheckboxesDisabledWhenIdCheckboxIsChecked = (idCheckboxElement) => {
	$(".jqIdCheckbox")
		.not(idCheckboxElement)
		.attr({ 'disabled': 'true', 'aria-disabled': 'true' });
}

/** 
 * –§—É–Ω–∫—Ü–∏—è, –≤—ã–±–∏—Ä–∞—é—â–∞—è –≤—Å–µ —á–µ–∫–±–æ–∫—Å—ã "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" –∫—Ä–æ–º–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ checkboxElement –∏ 
 * –≤–∫–ª—é—á–∞—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è.
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —É —á–µ–∫–±–æ–∫—Å–∞ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" —Å–æ—Å—Ç–æ—è–Ω–∏–µ
 * –º–µ–Ω—è–µ—Ç—Å—è —Å "–Ω–µ –≤—ã–±—Ä–∞–Ω" –Ω–∞ "–≤—ã–±—Ä–∞–Ω", –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ addOnChangeEventListenerToIdCheckbox().
 * @param {JQuery<HTMLElement>} idCheckboxElement - —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" 
 * @deprecated —Å –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π –æ—Ç–¥–∞–ª–∏ –Ω–∞ –±–µ–∫–µ–Ω–¥
 */
const _makeAnotherIdCheckboxesEnabledWhenIdCheckboxIsNotChecked = (idCheckboxElement) => {
	$('.jqIdCheckbox')
		.not(idCheckboxElement)
		.removeAttr('disabled')
		.removeClass('disabled');
}

/** 
 * –§—É–Ω–∫—Ü–∏—è, –≤—ã–±–∏—Ä–∞—é—â–∞—è —Å–æ—Å–µ–¥–Ω–∏–π –≤ —Å—Ç—Ä–æ–∫–µ —á–µ–∫–±–æ–∫—Å "–ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º–æ–µ", –º–µ–Ω—è—é—â–∞—è –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ "–≤—ã–±—Ä–∞–Ω", 
 * –ø—Ä–∏ —ç—Ç–æ–º –æ—Ç–∫–ª—é—á–∞—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —É —á–µ–∫–±–æ–∫—Å–∞ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" —Å–æ—Å—Ç–æ—è–Ω–∏–µ
 * –º–µ–Ω—è–µ—Ç—Å—è —Å "–Ω–µ –≤—ã–±—Ä–∞–Ω" –Ω–∞ "–≤—ã–±—Ä–∞–Ω", –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ addOnChangeEventListenerToIdCheckbox().
 * @param {JQuery<HTMLElement>} idCheckboxElement - —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" 
 */
const _makeSameRowIndexCheckboxCheckedAndDisabledWhenIdCheckboxIsChecked = (idCheckboxElement) => {
	$(idCheckboxElement)
		.parent('.jqIdCheckboxParent')
		.siblings('.jqIndexCheckboxParent')
		.children('.jqIndexCheckbox')
		.attr({ 'current-checked': 'true', 'disabled': 'true', 'aria-disabled': 'true' });
}

/** 
 * –§—É–Ω–∫—Ü–∏—è, –≤—ã–±–∏—Ä–∞—é—â–∞—è —Å–æ—Å–µ–¥–Ω–∏–π –≤ —Å—Ç—Ä–æ–∫–µ —á–µ–∫–±–æ–∫—Å "–ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º–æ–µ" –∏ 
 * –≤–∫–ª—é—á–∞—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —É —á–µ–∫–±–æ–∫—Å–∞ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" —Å–æ—Å—Ç–æ—è–Ω–∏–µ
 * –º–µ–Ω—è–µ—Ç—Å—è —Å "–≤—ã–±—Ä–∞–Ω" –Ω–∞ "–Ω–µ –≤—ã–±—Ä–∞–Ω", –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ addOnChangeEventListenerToIdCheckbox().
 * @param {JQuery<HTMLElement>} idCheckboxElement - —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" 
 */
const _makeSameRowIndexCheckboxEnabledWhenIdCheckboxIsNotChecked = (idCheckboxElement) => {
	$(idCheckboxElement)
		.parent('.jqIdCheckboxParent')
		.siblings('.jqIndexCheckboxParent')
		.children('.jqIndexCheckbox')
		.removeAttr('disabled')
		.removeClass('disabled');
}

/** 
 * –§—É–Ω–∫—Ü–∏—è, –æ—Ç–∫–ª—é—á–∞—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ–∫–±–æ–∫—Å–∞ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" –≤ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–π —Å—Ç—Ä–æ–∫–µ 
 * —Ç–æ–≥–¥–∞ –∏ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥—Ä—É–≥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —á–µ–∫–±–æ–∫—Å–æ–º "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë", –≤–≤–∏–¥—É —á–µ–≥–æ —É
 * –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ–∫–±–æ–∫—Å–∞ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë".
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏ –≤ _addRow().
 * @param {JQuery<HTMLElement>} idCheckboxElement - —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë"
 * @deprecated —Å –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π –æ—Ç–¥–∞–ª–∏ –Ω–∞ –±–µ–∫–µ–Ω–¥ 
 */
export const makeNewRowIdCheckboxDisabledIfAnyIdCheckboxIsChecked = (idCheckboxElement) => {
	if ($('.jqIdCheckbox.checked').length) {
		$(idCheckboxElement)
			.attr({ 'disabled': 'true', 'aria-disabled': 'true' });
	}
}

/** 
 * –§—É–Ω–∫—Ü–∏—è, –≤–∫–ª—é—á–∞—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ–∫–±–æ–∫—Å–æ–≤ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" –∏–∑ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–æ–∫, 
 * —Ç–æ–≥–¥–∞ –∏ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –∫–æ–≥–¥–∞ –º—ã —É–¥–∞–ª—è–µ–º —Å—Ç—Ä–æ–∫—É —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —á–µ–∫–±–æ–∫—Å–æ–º "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë".
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏ –≤ _removeRow().
 * @param {JQuery<HTMLElement>} idCheckboxElement - —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë"
 * @deprecated —Å –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π –æ—Ç–¥–∞–ª–∏ –Ω–∞ –±–µ–∫–µ–Ω–¥
 */
export const makeDisabledIdCheckboxesEnabledWhenRemoveRowWithCheckedIdCheckbox = (idCheckboxElement) => {
	if ($(idCheckboxElement).hasClass('checked')) {
		$('.jqIdCheckbox')
			.removeAttr('disabled')
			.removeClass('disabled');
	}
}

/** 
 * –§—É–Ω–∫—Ü–∏—è, –¥–æ–±–∞–≤–ª—è—é—â–∞—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π –Ω–∞ —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë", 
 * –∑–∞–ø—É—Å–∫–∞—é—â–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–≤—ã–±—Ä–∞–Ω / –Ω–µ –≤—ã–±—Ä–∞–Ω) —á–µ–∫–±–æ–∫—Å–∞ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" 
 * –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π:
 * 
 * 1) –ï—Å–ª–∏ —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ "–≤—ã–±—Ä–∞–Ω", –∑–∞–ø—É—Å—Ç–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é 
 * _makeSameRowIndexCheckboxCheckedAndDisabledWhenIdCheckboxIsChecked(), –∫–æ—Ç–æ—Ä–∞—è –≤—ã–±–∏—Ä–∞–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–π –≤ —Å—Ç—Ä–æ–∫–µ 
 * —á–µ–∫–±–æ–∫—Å "–ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º–æ–µ" –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é
 * _makeAnotherIdCheckboxesDisabledWhenIdCheckboxIsChecked(), –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è 
 * —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä—É–≥–∏—Ö —á–µ–∫–±–æ–∫—Å–æ–≤ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë".
 * 
 * 2) –ï—Å–ª–∏ —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å "–≤—ã–±—Ä–∞–Ω" –Ω–∞ "–Ω–µ –≤—ã–±—Ä–∞–Ω", –∑–∞–ø—É—Ç–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é
 * _makeSameRowIndexCheckboxEnabledWhenIdCheckboxIsNotChecked(), –∫–æ—Ç–æ—Ä–∞—è –≤—ã–±–∏—Ä–∞–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–π –≤ —Å—Ç—Ä–æ–∫–µ
 * —á–µ–∫–±–æ–∫—Å "–ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º–æ–µ" –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é
 * _makeAnotherIdCheckboxesEnabledWhenIdCheckboxIsNotChecked(), –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è 
 * —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä—É–≥–∏—Ö —á–µ–∫–±–æ–∫—Å–æ–≤ "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë".
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ addOnChangeEventListenerToAllIdCheckboxes() –∏–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏, —Ç–∞–∫ –∫–∞–∫ 
 * html —à–∞–±–ª–æ–Ω –∫–æ–ª–æ–Ω–∫–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π. 
 * 
 * (–≤ —ç—Ç–æ–º –≤–µ–±–≤—å—é –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã js, –Ω–µ –≤ html).
 * @param {JQuery<HTMLElement>} idCheckboxElement - —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë"
 */
export const addOnChangeEventListenerToIdCheckbox = (idCheckboxElement) => {
	$(idCheckboxElement)[0].addEventListener("change", () => {
		if (idCheckboxElement.checked) {
			_makeSameRowIndexCheckboxCheckedAndDisabledWhenIdCheckboxIsChecked(idCheckboxElement);
		} else {
			_makeSameRowIndexCheckboxEnabledWhenIdCheckboxIsNotChecked(idCheckboxElement);
		}
	})
}

/** 
 * –§—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–º–µ–Ω—è—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—é addOnChangeEventListenerToIdCheckbox()
 * –Ω–∞ –∫–∞–∂–¥—ã–π —á–µ–∫–±–æ–∫—Å "–ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ üîë" –Ω–∞ –≤–µ–±–≤—å—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –µ–≥–æ –∑–∞–≥—Ä—É–∑–∫–µ.
 * 
 * –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM.
 */
export const addOnChangeEventListenerToAllIdCheckboxes = () => {
	$.each($('.jqIdCheckbox'), function () {
		addOnChangeEventListenerToIdCheckbox(this);
	})
}